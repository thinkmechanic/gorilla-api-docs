<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <link href="stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
      <script src="javascripts/all_nosearch.js" type="text/javascript"></script>

      <script>
        $(function() {
          setupLanguages(["http","ruby"]);
        });
      </script>
  </head>

  <body class="index">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.jpg" />

        <div class="lang-selector">
              <a href="#" data-language-name="http">http</a>
              <a href="#" data-language-name="ruby">ruby</a>
        </div>
      <div id="toc">
        <div id="toc-section"></div>
      </div>
        <ul class="toc-footer">
            <li>See an error? <a href='http://github.com/thinkmechanic/gorilla-api-docs'>Send a pull request.</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        

        <div class='content-section'>
            <h1 id='introduction'>Introduction</h1>
<p>Welcome to the <a href="https://gorilla.io/">Gorilla.io</a> API docs.</p>

<p>Getting yourself setup to use our API with your favorite programming language is
pretty easy.</p>
<pre><code class="highlight ruby"><span class="n">gem</span> <span class="s1">'gorilla-io'</span>
</code></pre>

            <h1 id='authentication'>Authentication</h1>
<p><aside class="notice">
<strong>Always keep your <code class="prettyprint">API_KEY</code> and <code class="prettyprint">API_SECRET</code> private.</strong>
</aside></p>

<p>Authenticating with the Gorilla.io API is:</p>

<ul>
<li><strong>super simple.</strong></li>
<li><strong><a title="JSON Web Token" href="http://jwt.io/">JSON Web Token</a> based.</strong></li>
<li><strong>required for every request.</strong></li>
</ul>

<p>You&rsquo;ll need your <code class="prettyprint">API_KEY</code> and <code class="prettyprint">API_SECRET</code> to authenticate, and getting ahold
of those is easy. Just login to the <a href="https://app.gorilla.io">Gorilla.io App</a>
and visit your <a href="https://app.gorilla.io/account">Account</a> tab. Those credentials
should be clearly labeled on that screen.</p>

<p><em>Note:</em> We do plan to add OAUTH Authentication support in the future.</p>
<h2 id='authenticating-your-requests'>Authenticating your Requests</h2>
<blockquote>
<p>Authorization Header Format</p>
</blockquote>
<pre><code class="highlight plaintext">Authorization: Signature {API_KEY} {SIGNATURE}
</code></pre>

<blockquote>
<p>Request authorization:</p>
</blockquote>
<pre><code class="highlight http"><span class="nf">GET</span> <span class="nn">/example</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">User-Agent</span><span class="p">:</span> <span class="s">Magilla/1.0.0</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/vnd.gorilla.v1+json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Signature {API_KEY} {SIGNATURE}</span>
</code></pre>
<pre><code class="highlight ruby"><span class="nb">require</span> <span class="s1">'gorilla-io'</span>

<span class="no">Gorilla</span><span class="p">.</span><span class="nf">configure</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api</span><span class="p">.</span><span class="nf">key</span> <span class="o">=</span> <span class="s1">'{API_KEY}'</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api</span><span class="p">.</span><span class="nf">secret</span> <span class="o">=</span> <span class="s1">'{API_SECRET}'</span>
<span class="k">end</span>
</code></pre>

<p>Authenticating your API requests consists simply of generating the correct
<code class="prettyprint">Authorization</code> header for the current request.</p>

<p>It contains three parts:</p>

<ol>
<li>The authorization type (currently, only <code class="prettyprint">Signature</code> is supported).</li>
<li>The <code class="prettyprint">API_KEY</code> representing the user making the request.</li>
<li>The signature of the request, generated using the <code class="prettyprint">API_SECRET</code> for the user
making the request. (We&rsquo;ll get into more detail about generating these
signatures below).</li>
</ol>
<h2 id='signing-a-request-with-jwt'>Signing a Request with JWT</h2>
<blockquote>
<p>Example token generation using the <a title="PHP JWT" href="https://github.com/firebase/php-jwt">PHP JWT</a> library for a <code class="prettyprint">GET</code>
request to <code class="prettyprint">https://api.gorilla.io/forms</code>.</p>
</blockquote>
<pre><code class="highlight php"><span class="cp">&lt;?php</span>

<span class="nv">$apiSecret</span> <span class="o">=</span> <span class="s2">"your-api-key"</span><span class="p">;</span>

<span class="c1">// Generate a token expiring at midnight on Jan 1, 2015.
// Please note that order here is important.
</span><span class="nv">$token</span> <span class="o">=</span> <span class="nx">JWT</span><span class="o">::</span><span class="na">encode</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
  <span class="s2">"exp"</span> <span class="o">=&gt;</span> <span class="nb">strtotime</span><span class="p">(</span><span class="s2">"2015-01-01 00:00:00"</span><span class="p">),</span>
  <span class="s2">"method"</span> <span class="o">=&gt;</span> <span class="s2">"GET"</span><span class="p">,</span>
  <span class="s2">"path"</span> <span class="o">=&gt;</span> <span class="s2">"/forms"</span>
<span class="p">),</span> <span class="nv">$api_secret</span><span class="p">,</span> <span class="s1">'HS256'</span><span class="p">);</span>
</code></pre>

<blockquote>
<p>To test, the parameters above generate the following token:</p>
</blockquote>
<pre><code class="highlight plaintext">eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE0MjAwODg0MDAsIm1ldGhvZCI6IkdFVCIsInBhdGgiOiIvZm9ybXMifQ.XCzSh0vbNvtVaKAJ4NTT7gmV7bdV_ez36WfmibmwDyk
</code></pre>

<p>The Gorilla.io API <strong>requires</strong> every request to be signed using a token
produced using the <a title="JSON Web Token" href="http://jwt.io/">JSON Web Token</a> format. There is probably already a JWT
client written in your favorite language:</p>

<ul>
<li><a title="Ruby JWT" href="https://github.com/progrium/ruby-jwt"><strong>Ruby</strong></a></li>
<li><a title="PHP JWT" href="https://github.com/firebase/php-jwt"><strong>PHP</strong></a></li>
<li><a href="https://github.com/auth0/node-jsonwebtoken"><strong>Node</strong></a></li>
<li>More can be found at the <a href="http://jwt.io/">JWT Website</a></li>
</ul>

<p><strong>Your JWT library must be capable of creating tokens using <code class="prettyprint">HMAC</code> with
<code class="prettyprint">SHA-256</code> (or <code class="prettyprint">HS256</code>) as the signing algorithm.</strong></p>
<h3 id='token-parameters'>Token Parameters</h3>
<p><aside class="warning">
The order your parameters are passed should match the order that they are
defined in these docs.
</aside></p>

<p>The following parameters are <strong>required</strong> as part of your token. Order is important.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">exp</code></td>
<td>Integer</td>
<td>A UNIX timestamp for when this signature expires.</td>
</tr>
<tr>
<td><code class="prettyprint">method</code></td>
<td>String</td>
<td>The intended HTTP request method (eg <code class="prettyprint">GET</code>).</td>
</tr>
<tr>
<td><code class="prettyprint">path</code></td>
<td>String</td>
<td>The intended HTTP request path (eg <code class="prettyprint">/forms</code>).</td>
</tr>
</tbody></table>

            <h1 id='errors'>Errors</h1>
<p>Gorilla.io uses basic HTTP response codes to indicate success or failure of a
request. For the most part, codes in the <code class="prettyprint">2xx</code> range indicate a success, codes
in the <code class="prettyprint">4xx</code> range indicate a failure due to the information provided by the
client, and codes in the <code class="prettyprint">5xx</code> range indicate a server error on our part.</p>
<h2 id='error-responses'>Error Responses</h2><pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"validation_error"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"is required"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Whenever possible, we will return an <code class="prettyprint">error</code> object in the JSON response
containing the following attributes:</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">type</code></td>
<td>The type of error. See our error types for more info.</td>
</tr>
<tr>
<td><code class="prettyprint">message</code></td>
<td>A human-readable message describing the error.</td>
</tr>
</tbody></table>

            <h1 id='account'>Account</h1>
<p>This object represents both the <strong>User</strong> making the request and the
<strong>Account</strong> that User belongs to.</p>
<h2 id='retrieving-account-information'>Retrieving Account information</h2>
<blockquote>
<p>Example Request:</p>
</blockquote>
<pre><code class="highlight http"><span class="nf">GET</span> <span class="nn">/account</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">User-Agent</span><span class="p">:</span> <span class="s">Magilla/1.0.0</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/vnd.gorilla.v1+json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Signature 123456 abcdef</span>
</code></pre>
<pre><code class="highlight ruby"><span class="no">Gorilla</span><span class="o">::</span><span class="no">Account</span><span class="p">.</span><span class="nf">fetch</span>
</code></pre>

<blockquote>
<p>Example Response:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mgorilla@magilla.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Magilla"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Gorilla"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-01-01T00:00:00.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"account"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Magilla Widgets Co."</span><span class="p">,</span><span class="w">
      </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-01-01T00:00:00.000Z"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>It may be confusing that this endpoint
returns a top-level <code class="prettyprint">user</code> key instead of an <code class="prettyprint">account</code> key, but for the purposes
of the API, the API signature represents a User, so we return information about
that user, <strong>as well as</strong> the account they belong to.</p>

            <h1 id='forms'>Forms</h1>
<p>The <strong>Form</strong> object represents a form template uploaded to your account that can
be re-used using when creating merges.</p>
<h2 id='creating-a-form'>Creating a Form</h2>
<blockquote>
<p>Example Request:</p>
</blockquote>
<pre><code class="highlight http"><span class="nf">POST</span> <span class="nn">/forms</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">User-Agent</span><span class="p">:</span> <span class="s">Magilla/1.0.0</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Signature 123456 abcdef</span>
<span class="na">Content-type</span><span class="p">:</span> <span class="s">multipart/form-data, boundary=--XXXXXX</span>
<span class="na">Content-Length</span><span class="p">:</span> <span class="s">1024</span>

--XXXXXX
Content-Disposition: form-data; name="title"

Form 1099
--XXXXX
Content-Disposition: form-data; name="document"; filename="1099.pdf"
Content-Type: application/pdf

{Contents of 1099.pdf}
--XXXXXX
</code></pre>
<pre><code class="highlight ruby"><span class="no">Gorilla</span><span class="o">::</span><span class="no">Form</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">title: </span><span class="s1">'Form 1099'</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">form</span><span class="o">|</span>
  <span class="n">form</span><span class="p">.</span><span class="nf">upload</span> <span class="no">File</span><span class="p">.</span><span class="nf">read</span><span class="p">(</span><span class="s1">'1099.pdf'</span><span class="p">)</span>
<span class="k">end</span>
</code></pre>

<blockquote>
<p>Example Response:</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"form"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e65b200e69c3afaa9e5704a363932d72"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Form 1099"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
    </span><span class="s2">"original_file_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1099.pdf"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-01-01T00:00:00.000Z"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

        </div>
      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="http">http</a>
                <a href="#" data-language-name="ruby">ruby</a>
          </div>
      </div>
    </div>
  </body>
</html>
